/*
 * main.js
 * 
 * Gleath: a random English word generator
 *
 * Â© 2015 Seb Pearce (sebpearce.com)
 * Licensed under the MIT License.
 * 
 */

'use strict';

// return random integer
function randomInt(max)
{
    return Math.floor(Math.random()*(max+1));
}

// check if integer (includes strings)
function isInt(value) {
  return !isNaN(value) && 
         parseInt(Number(value)) == value && 
         !isNaN(parseInt(value, 10));
}

var input = document.getElementById('generate-input');
var inputButton = document.getElementById('generate-button');

var resultDiv = document.getElementById('result');

var startConsonants = [
  'b',
  'bl',
  'br',
  'c',
  'cl',
  'cr',
  'ch',
  'd',
  'dr',
  'f',
  'fl',
  'fr',
  'g',
  'gr',
  'gl',
  'h',
  'j',
  // 'k',
  'kn',
  'l',
  'm',
  'n',
  'p',
  'pr',
  'pl',
  'ph',
  'qu',
  'r',
  's',
  'sl',
  'st',
  'str',
  'sp',
  'spr',
  'sc',
  'scr',
  'sk',
  'skr',
  'sm',
  'sn',
  'sh',
  'shr',
  'squ',
  'sw',
  't',
  'tr',
  'th',
  'thr',
  'tw',
  'v',
  'w',
  'wr',
  'wh',
  'y',
  'z',
];

var endings = [
  'abe',
  'ack',
  'act',
  'ade',
  'afe',
  'aft',
  'age',
  'aid',
  'aide',
  'aige',
  'aigh',
  'ail',
  'ain',
  'aine',
  'aint',
  'air',
  'aire',
  'aise',
  'aist',
  'aith',
  'ake',
  'ale',
  'alf',
  'alk',
  'all',
  'alm',
  'alp',
  'alt',
  'ame',
  'amp',
  'and',
  'ane',
  'ang',
  'ange',
  'ank',
  'ant',
  'ant',
  'ape',
  'ar',
  'are',
  'arl',
  'ase',
  'ash',
  'ask',
  'asp',
  'ass',
  'ast',
  'aste',
  'at',
  'atch',
  'ate',
  'ath',
  'aud',
  'auge',
  'augh',
  'aul',
  'ause',
  'ave',
  'aw',
  'awd',
  'awk',
  'awl',
  'aws',
  'ay',
  'aze',
  'ea',
  'each',
  'ead',
  'eaf',
  'eak',
  'eal',
  'eale',
  'eam',
  'ean',
  'ear',
  'ease',
  'east',
  'eat',
  'eath',
  'eathe',
  'eave',
  'eaze',
  'ebb',
  'eck',
  'ect',
  'ed',
  'ede',
  'ee',
  'eeb',
  'eech',
  'eed',
  'eef',
  'eeg',
  'eek',
  'eel',
  'eem',
  'een',
  'eep',
  'eer',
  'eest',
  'eet',
  'eeth',
  'eff',
  'eft',
  'eib',
  'eid',
  'eig',
  'eige',
  'eigh',
  'eil',
  'ein',
  'eir',
  'eist',
  'eit',
  'eith',
  'elf',
  'elk',
  'ell',
  'elm',
  'elp',
  'elt',
  'em',
  'emp',
  'en',
  'end',
  'eng',
  'enge',
  'enk',
  'ent',
  'ep',
  'er',
  'ere',
  'erl',
  'ese',
  'esh',
  'esk',
  'esp',
  'ess',
  'est',
  'et',
  'etch',
  'ete',
  'eth',
  'ew',
  'ewd',
  'ewt',
  'ey',
  'ib',
  'ibe',
  'ick',
  'ict',
  'id',
  'ide',
  'ie',
  'ied',
  'ief',
  'iel',
  'ier',
  'ies',
  'iest',
  'iet',
  'ieth',
  'ieve',
  'ife',
  'iff',
  'ift',
  'ig',
  'ige',
  'igh',
  'ike',
  'ile',
  'ilf',
  'ilk',
  'ill',
  'ilm',
  'ilt',
  'imp',
  'ind',
  'ing',
  'inge',
  'ink',
  'int',
  'ir',
  'ire',
  'irl',
  'ise',
  'ish',
  'isk',
  'isp',
  'iss',
  'ist',
  'it',
  'itch',
  'ite',
  'ith',
  'ithe',
  'itt',
  'oa',
  'oab',
  'oach',
  'oad',
  'oaf',
  'oag',
  'oah',
  'oak',
  'oal',
  'oam',
  'oan',
  'oap',
  'oar',
  'oast',
  'oat',
  'ob',
  'obe',
  'och',
  'ock',
  'oct',
  'od',
  'odd',
  'ode',
  'odge',
  'oe',
  'off',
  'oft',
  'og',
  'oge',
  'oid',
  'oil',
  'oin',
  'oir',
  'oist',
  'oit',
  'oke',
  'olf',
  'olk',
  'oll',
  'olt',
  'om',
  'omb',
  'ombe',
  'ome',
  'omp',
  'on',
  'ond',
  'one',
  'ong',
  'onge',
  'onk',
  'ont',
  'oob',
  'ooch',
  'ood',
  'oof',
  'ook',
  'ool',
  'oom',
  'oon',
  'oor',
  'oost',
  'oot',
  'orl',
  'osh',
  'oss',
  'ost',
  'ot',
  'otch',
  'ote',
  'ott',
  'ouch',
  'oud',
  'oug',
  'ouge',
  'ough',
  'oul',
  'oule',
  'our',
  'oust',
  'out',
  'ow',
  'owl',
  'own',
  'ows',
  'oy',
  'ubb',
  'ube',
  'uch',
  'uct',
  'udd',
  'ude',
  'uff',
  'uft',
  'ug',
  'uge',
  'ule',
  'ulf',
  'ulk',
  'ull',
  'ulp',
  'ult',
  'um',
  'ume',
  'ump',
  'un',
  'und',
  'une',
  'ung',
  'unge',
  'unk',
  'unt',
  'up',
  'upe',
  'ur',
  'ure',
  'url',
  'us',
  'use',
  'ush',
  'usk',
  'usp',
  'uss',
  'ust',
  'utch',
  'ute',
  'y',
];

function generateWords(n) {

  if (n > 1000) {
    alert('Too many.');
    input.value = '';
    return false;
  }

  var randA = randomInt(startConsonants.length - 1);
  var a = startConsonants[randA];
  var randB = randomInt(endings.length - 1);
  var b = endings[randB];
  var result = a + b;

  for (var i = 0; i < n; i++) {
    resultDiv.innerHTML += result + '<br>';
    randA = randomInt(startConsonants.length - 1);
    a = startConsonants[randA];
    randB = randomInt(endings.length - 1);
    b = endings[randB];
    result = a + b;
  }

}

function handleEnter(e) {
  if (e.keyCode == 13 && isInt(input.value) && input.value > 0) {
    resultDiv.innerHTML = '';
    generateWords(input.value);
  } 
}

function handleClick() {
  if (isInt(input.value) && input.value > 0) {
    resultDiv.innerHTML = '';
    generateWords(input.value);
  } 
}


// exceptions:
// 
// yy
// quu-
// quy



input.addEventListener('keypress', handleEnter, false);
inputButton.addEventListener('click', handleClick, false);



